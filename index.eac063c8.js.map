{"mappings":"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","sources":["src/index.js","src/js/to-the-top.js","src/js/modal-registration.js","src/js/autorisation.js"],"sourcesContent":["createPopularMoviesMarkup();\n// import './js/firebase';\nimport './js/theme-btn';\nimport './js/loader';\nimport './js/input';\nimport './js/my-data-base';\n\nimport './js/genres';\nimport './js/fetch-trailer';\nimport './js/view-Trailer';\nimport './js/fetch-films';\nimport './js/pagination';\nimport './js/main-markup';\nimport { createPopularMoviesMarkup } from './js/main-markup';\nimport './js/to-the-top';\nimport './js/modal';\n\nimport './js/modal-students';\nimport './js/modal-registration';\nimport './js/autorisation';\n","import { refs } from './refs';\n\nwindow.addEventListener('scroll', onPageScroll);\n\nfunction onPageScroll() {\n  const screenHeight = window.screen.height;\n  if (scrollY > 20) {\n    btnScrollEnabled();\n  }\n  if (scrollY < screenHeight / 4) {\n    btnScrollDisabled();\n  }\n}\n\nfunction btnScrollEnabled() {\n  refs.buttonTop.classList.remove('is-hidden');\n}\n\nfunction btnScrollDisabled() {\n  refs.buttonTop.classList.add('is-hidden');\n}\n\nrefs.buttonTop.addEventListener('click', onButtonTopClick);\n\nfunction onButtonTopClick() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n","const refs = {\n  openModalBtn: document.querySelector('[data-modal-reg-open]'),\n  closeModalBtn: document.querySelector('[data-modal-reg-close]'),\n  modal: document.querySelector('[data-reg-modal]'),\n};\nrefs.openModalBtn.addEventListener('click', toggleModal);\nrefs.closeModalBtn.addEventListener('click', toggleModal);\n\n\n\nexport function toggleModal() {\n  refs.modal.classList.toggle('is-hidden');\n}\n","import { refs } from './refs';\nimport { toggleModal } from './modal-registration';\nimport { initializeApp } from 'firebase/app';\nimport { Notify } from 'notiflix';\nimport { getFirestore, setDoc, doc } from 'firebase/firestore';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signOut,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n} from 'firebase/auth';\n\n// Firebase AUTH\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyDpHH4vTWioKzjyjXO2I80-uE6v02JiNMc',\n  authDomain: 'filmoteka-students-goit.firebaseapp.com',\n  projectId: 'filmoteka-students-goit',\n  storageBucket: 'filmoteka-students-goit.appspot.com',\n  messagingSenderId: '474370553773',\n  appId: '1:474370553773:web:273214bc0fea8263371324',\n  measurementId: 'G-8CJGR7QN75',\n};\n\ninitializeApp(firebaseConfig);\nconst db = getFirestore();\n\nconst auth = getAuth();\nlet name;\n\nrefs.signupForm.addEventListener('submit', e => {\n  e.preventDefault();\n  name = refs.signupForm.user_name.value;\n  const email = refs.signupForm.mail.value;\n  const password = refs.signupForm.password.value;\n\n  const ObjectDataQueue = {\n    queue: [],\n  };\n  const ObjectDataWatched = {\n    watched: [],\n  };\n\n  createUserWithEmailAndPassword(auth, email, password)\n    .then(cred => {\n      // Бажано сюди впихнути НЕТЛІФАЙ\n      Notify.success(`The user: ${name} has been created`);\n      refs.logBtnContainer.hidden = true;\n      refs.exitBtnContainer.hidden = false;\n      refs.signupForm.reset();\n      toggleModal();\n      refs.libraryHidden.classList.replace('visually-hidden', 'nav__item');\n    })\n    .catch(err => {\n      // netlify wrongs\n      Notify.failure(err.message);\n    });\n\n  // СТВОРИТИ в БД по НЕЙМ БАЗУ ДАННИх, яка буде слідкувати за списками\n  const newQueueRef = doc(db, email, 'queue');\n  setDoc(newQueueRef, ObjectDataQueue, { merge: true }).catch(err =>\n    Notify.failure(err.message)\n  );\n\n  const newWatchedRef = doc(db, email, 'watched');\n  setDoc(newWatchedRef, ObjectDataWatched, { merge: true }).catch(err =>\n    Notify.failure(err.message)\n  );\n\n  // addDoc(colRef, {\n  //   Or u can create Ur specific object\n  // })\n});\n\nrefs.loginForm.addEventListener('submit', e => {\n  e.preventDefault();\n  name = refs.loginForm.login.value;\n  const email = refs.loginForm.mail.value;\n  const password = refs.loginForm.password.value;\n\n  signInWithEmailAndPassword(auth, email, password)\n    .then(cred => {\n      Notify.success(`user: ${name} logged in`);\n      refs.logBtnContainer.hidden = true;\n      refs.exitBtnContainer.hidden = false;\n      toggleModal();\n      refs.libraryHidden.classList.replace('visually-hidden', 'nav__item');\n    })\n    .catch(err => {\n      Notify.failure(err.message);\n    });\n});\n\nrefs.logout.addEventListener('click', e => {\n  signOut(auth)\n    .then(() => {\n      Notify.info(`The user logged out`);\n      refs.logBtnContainer.hidden = false;\n      refs.exitBtnContainer.hidden = true;\n      refs.libraryHidden.classList.replace('nav__item', 'visually-hidden');\n    })\n    .catch(err => {\n      Notify.failure(err.message);\n    });\n});\n\nexport async function checkUserStatus() {\n  const userStatus = await onAuthStateChanged(auth, user => {\n    if (!user) {\n      refs.logBtnContainer.hidden = false;\n      refs.exitBtnContainer.hidden = true;\n      refs.libraryHidden.classList.replace('nav__item', 'visually-hidden');\n      refs.watchBtn.hidden = true;\n      refs.queueBtn.hidden = true;\n    } else {\n      refs.logBtnContainer.hidden = true;\n      refs.exitBtnContainer.hidden = false;\n      refs.libraryHidden.classList.replace('visually-hidden', 'nav__item');\n      refs.watchBtn.hidden = false;\n      refs.queueBtn.hidden = false;\n    }\n  });\n}\n\ncheckUserStatus();\n\nrefs.loginFormBtn.addEventListener('click', e => {\n  refs.logForm.classList.add('current');\n  refs.regForm.classList.remove('current');\n  refs.loginFormBtn.classList.toggle('target-btn');\n  refs.regFormBtn.classList.toggle('target-btn');\n});\nrefs.regFormBtn.addEventListener('click', e => {\n  refs.regForm.classList.add('current');\n  refs.logForm.classList.remove('current');\n  refs.loginFormBtn.classList.toggle('target-btn');\n  refs.regFormBtn.classList.toggle('target-btn');\n});\n"],"names":["parcelRequire","$krGWQ","window","addEventListener","screenHeight","screen","height","scrollY","refs","buttonTop","classList","remove","add","scrollTo","top","behavior","$4a1bd4b03c7d6580$var$refs","openModalBtn","document","querySelector","closeModalBtn","modal","$4a1bd4b03c7d6580$export$313c6d35f75fc0e","toggle","$gKkQl","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","$76531c2ea9e2a80e$var$db","$ftYLF","getFirestore","$76531c2ea9e2a80e$var$auth","$eyjy7","getAuth","$76531c2ea9e2a80e$var$name","signupForm","e","preventDefault","user_name","value","email","mail","password","createUserWithEmailAndPassword","then","cred","$7Y9D8","Notify","success","logBtnContainer","hidden","exitBtnContainer","reset","libraryHidden","replace","catch","err","failure","message","newQueueRef","doc","setDoc","queue","merge","newWatchedRef","watched","loginForm","login","signInWithEmailAndPassword","logout","signOut","info","async","onAuthStateChanged","user","watchBtn","queueBtn","$76531c2ea9e2a80e$export$a94e0ab5f4e3a8a6","loginFormBtn","logForm","regForm","regFormBtn","$bmZal","createPopularMoviesMarkup"],"version":3,"file":"index.eac063c8.js.map"}