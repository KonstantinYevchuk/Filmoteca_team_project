{"mappings":"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","sources":["src/index.js","src/js/to-the-top.js","src/js/modal-registration.js","src/js/autorisation.js"],"sourcesContent":["createPopularMoviesMarkup();\n// import './js/firebase';\nimport './js/theme-btn';\nimport './js/loader';\nimport './js/input';\nimport './js/my-data-base';\n\nimport './js/genres';\nimport './js/fetch-trailer';\nimport './js/view-Trailer';\nimport './js/fetch-films';\nimport './js/pagination';\nimport './js/main-markup';\nimport { createPopularMoviesMarkup } from './js/main-markup';\nimport './js/to-the-top';\nimport './js/modal';\n\nimport './js/modal-students';\nimport './js/modal-registration';\nimport './js/autorisation';\n","import { refs } from './refs';\n\nwindow.addEventListener('scroll', onPageScroll);\n\nfunction onPageScroll() {\n  const screenHeight = window.screen.height;\n  if (scrollY > 20) {\n    btnScrollEnabled();\n  }\n  if (scrollY < screenHeight / 4) {\n    btnScrollDisabled();\n  }\n}\n\nfunction btnScrollEnabled() {\n  refs.buttonTop.classList.remove('is-hidden');\n}\n\nfunction btnScrollDisabled() {\n  refs.buttonTop.classList.add('is-hidden');\n}\n\nrefs.buttonTop.addEventListener('click', onButtonTopClick);\n\nfunction onButtonTopClick() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n","const refs = {\n  openModalBtn: document.querySelector('[data-modal-reg-open]'),\n  closeModalBtn: document.querySelector('[data-modal-reg-close]'),\n  modal: document.querySelector('[data-reg-modal]'),\n};\nrefs.openModalBtn.addEventListener('click', toggleModal);\nrefs.closeModalBtn.addEventListener('click', toggleModal);\n\n\n\nexport function toggleModal() {\n  refs.modal.classList.toggle('is-hidden');\n}\n","import { refs } from './refs';\nimport { toggleModal } from './modal-registration';\nimport { initializeApp } from 'firebase/app';\nimport { Notify } from 'notiflix';\nimport { getFirestore, setDoc, doc } from 'firebase/firestore';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signOut,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n} from 'firebase/auth';\n\n// Firebase AUTH\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyDpHH4vTWioKzjyjXO2I80-uE6v02JiNMc',\n  authDomain: 'filmoteka-students-goit.firebaseapp.com',\n  projectId: 'filmoteka-students-goit',\n  storageBucket: 'filmoteka-students-goit.appspot.com',\n  messagingSenderId: '474370553773',\n  appId: '1:474370553773:web:273214bc0fea8263371324',\n  measurementId: 'G-8CJGR7QN75',\n};\n\ninitializeApp(firebaseConfig);\nconst db = getFirestore();\n\nconst auth = getAuth();\nlet name;\n\nrefs.signupForm.addEventListener('submit', e => {\n  e.preventDefault();\n  name = refs.signupForm.user_name.value;\n  const email = refs.signupForm.mail.value;\n  const password = refs.signupForm.password.value;\n\n  const ObjectDataQueue = {\n    queue: [],\n  };\n  const ObjectDataWatched = {\n    watched: [],\n  };\n\n  createUserWithEmailAndPassword(auth, email, password)\n    .then(cred => {\n      // Бажано сюди впихнути НЕТЛІФАЙ\n      Notify.success(`The user: ${name} has been created`);\n      refs.logBtnContainer.hidden = true;\n      refs.exitBtnContainer.hidden = false;\n      refs.signupForm.reset();\n      toggleModal();\n      refs.libraryHidden.classList.replace('visually-hidden', 'nav__item');\n    })\n    .catch(err => {\n      // netlify wrongs\n      Notify.failure(err.message);\n    });\n\n  // СТВОРИТИ в БД по НЕЙМ БАЗУ ДАННИх, яка буде слідкувати за списками\n  const newQueueRef = doc(db, email, 'queue');\n  setDoc(newQueueRef, ObjectDataQueue, { merge: true }).catch(err =>\n    Notify.failure(err.message)\n  );\n\n  const newWatchedRef = doc(db, email, 'watched');\n  setDoc(newWatchedRef, ObjectDataWatched, { merge: true }).catch(err =>\n    Notify.failure(err.message)\n  );\n\n  // addDoc(colRef, {\n  //   Or u can create Ur specific object\n  // })\n});\n\nrefs.loginForm.addEventListener('submit', e => {\n  e.preventDefault();\n  name = refs.loginForm.login.value;\n  const email = refs.loginForm.mail.value;\n  const password = refs.loginForm.password.value;\n\n  signInWithEmailAndPassword(auth, email, password)\n    .then(cred => {\n      Notify.success(`user: ${name} logged in`);\n      refs.logBtnContainer.hidden = true;\n      refs.exitBtnContainer.hidden = false;\n      toggleModal();\n      refs.libraryHidden.classList.replace('visually-hidden', 'nav__item');\n    })\n    .catch(err => {\n      Notify.failure(err.message);\n    });\n});\n\nrefs.logout.addEventListener('click', e => {\n  signOut(auth)\n    .then(() => {\n      Notify.info(`The user logged out`);\n      refs.logBtnContainer.hidden = false;\n      refs.exitBtnContainer.hidden = true;\n      refs.libraryHidden.classList.replace('nav__item', 'visually-hidden');\n    })\n    .catch(err => {\n      Notify.failure(err.message);\n    });\n});\n\nexport async function checkUserStatus() {\n  const userStatus = await onAuthStateChanged(auth, user => {\n    if (!user) {\n      refs.logBtnContainer.hidden = false;\n      refs.exitBtnContainer.hidden = true;\n      refs.libraryHidden.classList.replace('nav__item', 'visually-hidden');\n      refs.watchBtn.hidden = true;\n      refs.queueBtn.hidden = true;\n    } else {\n      refs.logBtnContainer.hidden = true;\n      refs.exitBtnContainer.hidden = false;\n      refs.libraryHidden.classList.replace('visually-hidden', 'nav__item');\n      refs.watchBtn.hidden = false;\n      refs.queueBtn.hidden = false;\n    }\n  });\n}\n\ncheckUserStatus();\n\nrefs.loginFormBtn.addEventListener('click', e => {\n  refs.logForm.classList.add('current');\n  refs.regForm.classList.remove('current');\n  refs.loginFormBtn.classList.toggle('target-btn');\n  refs.regFormBtn.classList.toggle('target-btn');\n});\nrefs.regFormBtn.addEventListener('click', e => {\n  refs.regForm.classList.add('current');\n  refs.logForm.classList.remove('current');\n  refs.loginFormBtn.classList.toggle('target-btn');\n  refs.regFormBtn.classList.toggle('target-btn');\n});\n"],"names":["parcelRequire","$4Nugj","window","addEventListener","screenHeight","screen","height","scrollY","refs","buttonTop","classList","remove","add","scrollTo","top","behavior","$f4f156565a4dcfb9$var$refs","openModalBtn","document","querySelector","closeModalBtn","modal","$f4f156565a4dcfb9$export$313c6d35f75fc0e","toggle","$bpxeT","$fkNhc","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","$4127b638907e360b$var$name","$4127b638907e360b$var$db","$6m2hf","getFirestore","$4127b638907e360b$var$auth","$gQOBw","getAuth","$4127b638907e360b$var$_checkUserStatus","$parcel$interopDefault","$2TvXO","mark","_callee","onAuthStateChanged","user","logBtnContainer","hidden","exitBtnContainer","libraryHidden","replace","watchBtn","queueBtn","_ctx","sent","apply","this","arguments","signupForm","e","preventDefault","user_name","value","email","mail","password","createUserWithEmailAndPassword","then","cred","$6JpON","Notify","success","concat","reset","catch","err","failure","message","newQueueRef","doc","setDoc","queue","merge","newWatchedRef","watched","loginForm","login","signInWithEmailAndPassword","logout","signOut","info","$4127b638907e360b$export$a94e0ab5f4e3a8a6","loginFormBtn","logForm","regForm","regFormBtn","$6Zzi9","createPopularMoviesMarkup"],"version":3,"file":"index.d3e19161.js.map"}