{"mappings":"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","sources":["src/index.js","src/js/modal-registration.js","src/js/autorisation.js"],"sourcesContent":["createPopularMoviesMarkup();\nimport './js/firebase';\nimport './js/theme-btn';\nimport './js/loader';\nimport './js/input';\n// import './js/modal-markup';\n\nimport './js/fetch-trailer';\nimport './js/view-Trailer';\nimport './js/fetch-films';\nimport './js/pagination';\nimport './js/main-markup';\nimport { createPopularMoviesMarkup } from './js/main-markup';\n\nimport './js/modal';\n\nimport './js/modal-students';\nimport './js/modal-registration';\nimport './js/autorisation';\n","const refs = {\n  openModalBtn: document.querySelector('[data-modal-reg-open]'),\n  closeModalBtn: document.querySelector('[data-modal-reg-close]'),\n  modal: document.querySelector('[data-reg-modal]'),\n};\nrefs.openModalBtn.addEventListener('click', toggleModal);\nrefs.closeModalBtn.addEventListener('click', toggleModal);\n\n\n\nfunction toggleModal() {\n  refs.modal.classList.toggle('is-hidden');\n}\n","import { refs } from './refs';\nimport { initializeApp } from 'firebase/app';\nimport { Notify } from 'notiflix';\nimport { getFirestore, setDoc, doc } from 'firebase/firestore';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signOut,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n} from 'firebase/auth';\n\n// Firebase AUTH\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyDpHH4vTWioKzjyjXO2I80-uE6v02JiNMc',\n  authDomain: 'filmoteka-students-goit.firebaseapp.com',\n  projectId: 'filmoteka-students-goit',\n  storageBucket: 'filmoteka-students-goit.appspot.com',\n  messagingSenderId: '474370553773',\n  appId: '1:474370553773:web:273214bc0fea8263371324',\n  measurementId: 'G-8CJGR7QN75',\n};\n\ninitializeApp(firebaseConfig);\nconst db = getFirestore();\n\nconst auth = getAuth();\nlet name;\nlet currentUser;\n\nconst loginForm = document.querySelector('.login-form');\nconst signupForm = document.querySelector('.registration-form');\nconst logout = document.querySelector('.js-btn-exit');\nconst logBtnContainer = document.querySelector('.js-btn-in');\nconst exitBtnContainer = document.querySelector('.js-btn-exit');\n\n// const loginFormBtn = document.querySelector('#data-formBtn-login');\n// const regFormBtn = document.querySelector('#data-formBtn-reg');\n// const logForm = document.querySelector('#data-login-box');\n// const regForm = document.querySelector('#data-reg-box');\n\n\nsignupForm.addEventListener('submit', e => {\n  e.preventDefault();\n\n  name = signupForm.user_name.value;\n  const email = signupForm.mail.value;\n  const password = signupForm.password.value;\n\n  const ObjectDataName = {\n    name: `${name}`,\n  };\n\n  createUserWithEmailAndPassword(auth, email, password)\n    .then(cred => {\n      // Бажано сюди впихнути НЕТЛІФАЙ\n      Notify.success(`The user: ${name} has been created`);\n      logBtnContainer.hidden = true;\n      exitBtnContainer.hidden = false;\n      signupForm.reset();\n    })\n    .catch(err => {\n      // netlify wrongs\n      Notify.failure(err.message);\n    });\n\n  // СТВОРИТИ в БД по НЕЙМ БАЗУ ДАННИх, яка буде слідкувати за списками\n  const newUserRef = doc(db, email, 'username');\n  setDoc(newUserRef, ObjectDataName, { merge: true }).catch(err =>\n    Notify.failure(err.message)\n  );\n  // addDoc(colRef, {\n  //   Or u can create Ur specific object\n  // })\n});\n\nloginForm.addEventListener('submit', e => {\n  e.preventDefault();\n  name = loginForm.login.value;\n  const email = loginForm.mail.value;\n  const password = loginForm.password.value;\n\n  signInWithEmailAndPassword(auth, email, password)\n    .then(cred => {\n      Notify.success(`user: ${name} logged in`);\n      logBtnContainer.hidden = true;\n      exitBtnContainer.hidden = false;\n    })\n    .catch(err => {\n      Notify.failure(err.message);\n    });\n});\n\nlogout.addEventListener('click', e => {\n  signOut(auth)\n    .then(() => {\n      Notify.info(`The user logged out`);\n      logBtnContainer.hidden = false;\n      exitBtnContainer.hidden = true;\n    })\n    .catch(err => {\n      Notify.failure(err.message);\n    });\n});\n\nexport async function checkUserStatus() {\nconst userStatus =  await onAuthStateChanged(auth, user => {\n    console.log(user);\n    if (!user) {\n      \n      logBtnContainer.hidden = false;\n      exitBtnContainer.hidden = true;\n    } else{\n      logBtnContainer.hidden = true;\n      exitBtnContainer.hidden = false;\n    }\n  })\n  \n}\n\ncheckUserStatus();\n\nconsole.log(auth);\n\n\nrefs.loginFormBtn.addEventListener('click', e => {\n  refs.logForm.classList.add('current');\n  refs.regForm.classList.remove('current');\n  refs.loginFormBtn.classList.toggle('target-btn');\n  refs.regFormBtn.classList.toggle('target-btn');\n});\nrefs.regFormBtn.addEventListener('click', e => {\n  refs.regForm.classList.add('current');\n  refs.logForm.classList.remove('current');\n  refs.loginFormBtn.classList.toggle('target-btn');\n  refs.regFormBtn.classList.toggle('target-btn');\n});\n"],"names":["parcelRequire","$f4f156565a4dcfb9$var$refs","openModalBtn","document","querySelector","closeModalBtn","modal","$f4f156565a4dcfb9$var$toggleModal","classList","toggle","addEventListener","$bpxeT","$fkNhc","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","$4127b638907e360b$var$name","$4127b638907e360b$var$db","$6m2hf","getFirestore","$4127b638907e360b$var$auth","$gQOBw","getAuth","$4127b638907e360b$var$loginForm","$4127b638907e360b$var$signupForm","$4127b638907e360b$var$logout","$4127b638907e360b$var$logBtnContainer","$4127b638907e360b$var$exitBtnContainer","$4127b638907e360b$var$_checkUserStatus","$parcel$interopDefault","$2TvXO","mark","_callee","onAuthStateChanged","user","console","log","hidden","_ctx","sent","apply","this","arguments","e","preventDefault","user_name","value","email","mail","password","ObjectDataName","name","concat","createUserWithEmailAndPassword","then","cred","$6JpON","Notify","success","reset","catch","err","failure","message","newUserRef","doc","setDoc","merge","login","signInWithEmailAndPassword","signOut","info","$4127b638907e360b$export$a94e0ab5f4e3a8a6","$4Nugj","refs","loginFormBtn","logForm","add","regForm","remove","regFormBtn","$6Zzi9","createPopularMoviesMarkup"],"version":3,"file":"index.496c4ef2.js.map"}